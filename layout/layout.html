<!doctype html>
<html>

<head>
    <meta charset="utf-8">

    {% if meta.keywords %}
    <meta name="keywords" content="{{meta.keywords.value | safe}}">
    {% endif %}
    {% if meta.description %}
    <meta name="description" content="{{meta.description.value | safe}}">
    {% endif %}
    {% if meta.description %}
    <title>{{meta.title.value | safe}}</title>
    {% else %}
    <title>{% block title %} Visualizer {% endblock %}</title>
    {% endif %}

    <script src="{{ config.cdn | concat('/lib/jquery/2.1.1/jquery.min.js') | processUrl(reldir, flavor) }}"></script>
    <script src="{{ config.cdn | concat('/lib/uri.js/1.14.1/URI.min.js') | processUrl(reldir, flavor) }}"></script>
    <script>
        window.addEventListener('load', function () {
            $('.navmenu').show();
        });
    </script>

    <!--No need to load other libraries if bot-->
    {% if config.useSSI %}
    <!--#if expr="%{HTTP_USER_AGENT} !~ /bot/" -->
    {% endif %}
    {% block head %}

    {% endblock %}

    {% if config.useSSI %}
    <!--#endif -->
    {% endif %}


</head>
<body>
{% if config.googleTrackingId %}
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', '{{ config.googleTrackingId }}', 'auto');
    ga('send', 'pageview');

</script>
{% endif %}
{% if config.useSSI %}
<!--#if expr="%{HTTP_USER_AGENT} =~ /bot/" -->
{{ botHtml | safe }}
<!--#endif -->
{% endif %}



<header>
    <nav>
        {% block menu %}
        {{ menuHtml|safe }}
        {% endblock %}
    </nav>
</header>

{% if config.useSSI %}
<!--#if expr="%{HTTP_USER_AGENT} !~ /bot/" -->
{% endif %}

{% block content %}{% endblock %}

{% block couchStatic %}
<div class="general">
    {% if meta.content.type == 'text' %}
    {{ meta.content.value }}
    {% elseif meta.content.type == 'html' %}
    {{ meta.content.value|safe }}
    {% endif %}
</div>
{% endblock couchStatic %}

{% block visualizer %}
{% if viewURL %}
{% include "./visualizer.html" %}
{% endif %}
{% endblock %}
{% if config.useSSI %}
<!--#endif -->
{% endif %}



</body>
</html>
